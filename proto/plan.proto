syntax = "proto3";

package plan;

option go_package = "shared/proto/plan";

// User service definition
service PlansService {
  // Get a single user by ID
//   rpc GetUser(GetUserRequest) returns (GetUserResponse);
  
  // Create a new user
  rpc CreatePin(CreatePinRequest) returns (CreatePinResponse);
  rpc GetPinByID(PinIDRequest) returns (GetPinByIDResponse);
  rpc GetPinByParticipant(GetPinByParticipantRequest) returns (GetPinsResponse);
  rpc UpdatePin(UpdatePinRequest) returns (SuccessResponse);
  rpc UpdatePinImage(UpdatePinImageRequest) returns (SuccessResponse);
  rpc DeletePinByID(PinIDRequest) returns (SuccessResponse);

  rpc CreateWhiteboard(CreateWhiteboardRequest) returns (CreateWhiteboardResponse);
  rpc GetWhiteboardByID(WhiteboardIDRequest) returns (GetWhiteboardByIDResponse);
  rpc UpdateWhiteboard(UpdateWhiteboardRequest) returns (SuccessResponse);
  rpc DeleteWhiteboardByID(WhiteboardIDRequest) returns (SuccessResponse);
}

// shared
message SuccessResponse {
  bool success = 1;
}

// pin
message CreatePinRequest {
  string name = 1;
  string description = 2;
  repeated Expenses expense = 3;
  float location = 4;
  repeated string parents = 5;
  repeated string participant = 6;
}

message CreatePinResponse {
  bool success = 1;
  string pinId = 2; //objectId AS a string
}

message PinIDRequest { // for getPinByID and DeletePinByID
  string pinId = 1;
}

message GetPinByIDResponse {
    bool success = 1;
    string name = 2;
    bytes image = 3;
    string description = 4;
    repeated Expenses expense = 5;
    float location = 6;
    repeated string parents = 7;
    repeated string participant = 8;
}

message GetPinByParticipantRequest {
  string userId = 1;
}

message GetPinsResponse { // for GetPinByParticipant
  repeated GetPinResponse pins = 1;
}

message GetPinResponse { // for GetPinsResponse
  string pinId = 1;
  string name = 2;
  bytes image = 3;
  repeated string parents = 4;
  repeated string participant = 5;
}

message UpdatePinRequest {
  string id = 1;
  string name = 2;
  string description = 3;
  repeated Expenses expense = 4;
  float location = 5;
  repeated string parents = 6;
  repeated string participant = 7;
}

message Expenses { // expense struct
  string id = 1;
  string name = 2;
  float expense = 3;
}

message UpdatePinImageRequest {
  string id = 1;
  bytes image = 2;
}


// whiteboard
message CreateWhiteboardRequest {
  string pin = 1;
  int32 day = 2;
}

message CreateWhiteboardResponse {
  bool success = 1;
  string whiteboardId = 2; //objectId AS a string
}

message WhiteboardIDRequest { // for getWhiteboardByID and DeleteWhiteboardByID
  string whiteboardId = 1;
}

message GetWhiteboardByIDResponse {
    bool success = 1;
    repeated string pins = 2;
    int32 day = 3;
}

message UpdateWhiteboardRequest {
  string id = 1;
  repeated string pins = 2;
  string pinChangeType = 3;
  int32 day = 4;
}